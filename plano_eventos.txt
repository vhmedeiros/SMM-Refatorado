### **üìå Como Registrar Apenas Eventos de Altera√ß√£o e Cria√ß√£o?**
Atualmente, os eventos **est√£o sendo registrados para qualquer a√ß√£o, incluindo pesquisas e visualiza√ß√µes**. Mas queremos **registrar eventos apenas quando houver cria√ß√£o ou altera√ß√£o de registros**.  

Para isso, **vamos modificar o sistema de eventos para capturar somente eventos relevantes**.

---

## **üìå Plano de Implementa√ß√£o**
### **1Ô∏è‚É£ Definir Quais A√ß√µes Devem Gerar um Evento**
Devemos registrar eventos apenas quando:
‚úÖ **Um novo registro for criado** (**"Criado"**)  
‚úÖ **Um registro for alterado** (**"Alterado"**)  
‚úÖ **Um registro for exclu√≠do** (**"Exclu√≠do"**, se necess√°rio)  

üö´ **N√£o registramos eventos para buscas ou visualiza√ß√µes de detalhes**.

---

### **2Ô∏è‚É£ Como Detectar Essas A√ß√µes?**
Para capturar **apenas eventos de cria√ß√£o e altera√ß√£o**, usaremos a l√≥gica dentro do m√©todo `form_valid()` das **CBVs de CreateView e UpdateView**.

- **Ao criar um novo registro (`CreateView`)**, registramos **"Criado"**.  
- **Ao atualizar um registro existente (`UpdateView`)**, verificamos **quais campos foram modificados** e registramos **"Alterado"**.  

Isso evita que eventos desnecess√°rios sejam criados.

---

### **3Ô∏è‚É£ Criar uma Fun√ß√£o para Verificar se um Registro foi Modificado**
Para capturar **se um campo foi alterado**, **antes de salvar o formul√°rio**, podemos comparar os valores antigos com os novos.

A l√≥gica ser√°:
1Ô∏è‚É£ **Buscar o objeto original no banco de dados**.  
2Ô∏è‚É£ **Comparar os valores dos campos antes e depois da edi√ß√£o**.  
3Ô∏è‚É£ **Se houver altera√ß√£o, registrar um evento**.  

---

### **4Ô∏è‚É£ Ajustar os Eventos no `form_valid()`**
- **Na `CreateView`** ‚Üí O evento ser√° sempre **"Criado"**.  
- **Na `UpdateView`** ‚Üí S√≥ registramos um evento se os dados realmente mudaram.  

---

## **üìå Exemplo de Como o Evento Deve Ficar no Banco**
Caso um usu√°rio altere um e-mail dentro do sistema, o evento salvo deve ser algo como:

```
19/03/2025 12:11:32	
Banco do Brasil S/A SITE - SISTEMA DE E-MAIL - E-MAIL ALTERADO. 
--------------------------------------------------------
Conte√∫do: 318000|CCD|36163||Boletim Digov - Governador Federal 
--------------------------------------------------------
Usu√°rio: aldeide
```

Ou, caso seja um novo registro:

```
19/03/2025 10:35:20
Novo ve√≠culo cadastrado: Jornal Nacional - RJ
Usu√°rio: admin
```

---

## **üìå Pr√≥ximos Passos**
‚úÖ **Modificar o `form_valid()` para capturar apenas eventos de cria√ß√£o e altera√ß√£o**.  
‚úÖ **Criar uma fun√ß√£o auxiliar para detectar mudan√ßas nos campos**.  
‚úÖ **Testar criando e editando registros para garantir que os eventos s√£o gerados corretamente**.  

---

üöÄ **Agora estamos prontos para ajustar a implementa√ß√£o! Me avise quando quiser seguir com os c√≥digos.**